{"ast":null,"code":"var _jsxFileName = \"/Users/morgan/dev/paintings/client/src/PhotoGallery.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React from 'react';\nimport { createSearchParams, useNavigate } from 'react-router-dom';\nimport Gallery from 'react-photo-gallery';\nimport Lightbox from \"yet-another-react-lightbox\";\nimport Captions from \"yet-another-react-lightbox/plugins/captions\";\nimport \"yet-another-react-lightbox/styles.css\";\nimport \"yet-another-react-lightbox/plugins/captions.css\";\nimport { usePaintings } from './usePaintings';\nimport { zoomies } from 'ldrs';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction getPaintingTitle(p) {\n  let title = `#${p.id}`;\n  if (p.name) {\n    title += ` - ${p.name}`;\n  }\n  if (p.year) {\n    title += ` (${p.year})`;\n  }\n  return title;\n}\nfunction getPaintingDescription(p) {\n  const parts = [];\n  if (p.size) {\n    parts.push(p.size);\n  }\n  if (p.medium) {\n    parts.push(p.medium);\n  }\n  if (p.isFramed) {\n    parts.push('Framed');\n  }\n  if (p.isFramed === false) {\n    // undefined means we don't know if it's framed or not\n    parts.push('Unframed');\n  }\n  if (p.conditionNotes) {\n    parts.push(p.conditionNotes);\n  }\n  if (p.status) {\n    parts.push(p.status);\n  }\n  // TODO: for some reason, this shows an ellipses at the end of only the third line.\n  // Possibly may need to do this properly as a component and not just text, by adding a plugin?\n  // See https://yet-another-react-lightbox.com/advanced#Modules\n  // For now, I'm right-aligning the text, which makes the ellipses disappear.\n  return `${parts.map(p => p.replaceAll('\\n', '')).join('\\n')}`;\n}\nfunction PhotoGalleryImpl(props) {\n  _s();\n  const {\n    paintings\n  } = props;\n  const navigate = useNavigate();\n  const params = new URLSearchParams(document.location.search);\n  // Track the painting id and not index in the header, so that the URL can be shared\n  // even when the order of the paintings changes.\n  const selectedPhotoId = params.get('selected');\n  const selectedPhotoIdx = selectedPhotoId ? paintings.findIndex(p => p.id === parseInt(selectedPhotoId)) : undefined;\n  const photos = paintings.map(p => {\n    const title = getPaintingTitle(p);\n    return {\n      src: p.photo.url,\n      width: p.photo.width,\n      height: p.photo.height,\n      source: p.photo.url,\n      caption: title,\n      original: p.photo.url,\n      thumbnail: p.photo.url,\n      id: p.id,\n      title,\n      description: getPaintingDescription(p)\n    };\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Gallery, {\n      photos: photos,\n      onClick: (e, {\n        index\n      }) => {\n        var _photos$index;\n        const nextSelectedId = (_photos$index = photos[index]) === null || _photos$index === void 0 ? void 0 : _photos$index.id;\n        if (nextSelectedId) {\n          navigate({\n            pathname: document.location.pathname,\n            search: createSearchParams({\n              selected: nextSelectedId.toString()\n            }).toString()\n          });\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Lightbox, {\n      styles: {\n        captionsTitleContainer: {\n          backgroundColor: 'transparent'\n        },\n        captionsTitle: {\n          paddingLeft: '60px',\n          paddingTop: '40px'\n        },\n        captionsDescriptionContainer: {\n          backgroundColor: 'transparent'\n        },\n        captionsDescription: {\n          paddingLeft: '40px',\n          height: '200px',\n          width: '300px',\n          textAlign: 'right'\n        }\n      },\n      open: selectedPhotoIdx !== undefined,\n      close: () => navigate({\n        pathname: document.location.pathname\n      }),\n      index: selectedPhotoIdx,\n      slides: photos,\n      plugins: [Captions],\n      on: {\n        view: ({\n          index\n        }) => {\n          var _photos$index2;\n          const nextSelectedId = (_photos$index2 = photos[index]) === null || _photos$index2 === void 0 ? void 0 : _photos$index2.id;\n          if (nextSelectedId) {\n            navigate({\n              pathname: document.location.pathname,\n              search: createSearchParams({\n                selected: nextSelectedId.toString()\n              }).toString()\n            });\n          }\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n}\n_s(PhotoGalleryImpl, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n  return [useNavigate];\n});\n_c = PhotoGalleryImpl;\nexport default function PhotoGallery() {\n  _s2();\n  const paintings = usePaintings();\n  zoomies.register();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: paintings === 'loading' ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: /*#__PURE__*/_jsxDEV(\"l-zoomies\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }, this) : paintings === 'error' ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"Error loading paintings\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(PhotoGalleryImpl, {\n      paintings: paintings\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 11\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 138,\n    columnNumber: 5\n  }, this);\n}\n_s2(PhotoGallery, \"We5PzKv3D33eKxj0EH+j37wqjZY=\", false, function () {\n  return [usePaintings];\n});\n_c2 = PhotoGallery;\nvar _c, _c2;\n$RefreshReg$(_c, \"PhotoGalleryImpl\");\n$RefreshReg$(_c2, \"PhotoGallery\");","map":{"version":3,"names":["React","createSearchParams","useNavigate","Gallery","Lightbox","Captions","usePaintings","zoomies","jsxDEV","_jsxDEV","getPaintingTitle","p","title","id","name","year","getPaintingDescription","parts","size","push","medium","isFramed","conditionNotes","status","map","replaceAll","join","PhotoGalleryImpl","props","_s","paintings","navigate","params","URLSearchParams","document","location","search","selectedPhotoId","get","selectedPhotoIdx","findIndex","parseInt","undefined","photos","src","photo","url","width","height","source","caption","original","thumbnail","description","children","onClick","e","index","_photos$index","nextSelectedId","pathname","selected","toString","fileName","_jsxFileName","lineNumber","columnNumber","styles","captionsTitleContainer","backgroundColor","captionsTitle","paddingLeft","paddingTop","captionsDescriptionContainer","captionsDescription","textAlign","open","close","slides","plugins","on","view","_photos$index2","_c","PhotoGallery","_s2","register","className","_c2","$RefreshReg$"],"sources":["/Users/morgan/dev/paintings/client/src/PhotoGallery.tsx"],"sourcesContent":["import React from 'react';\nimport { createSearchParams, useNavigate } from 'react-router-dom';\nimport Gallery from 'react-photo-gallery'\nimport Lightbox from \"yet-another-react-lightbox\";\nimport Captions from \"yet-another-react-lightbox/plugins/captions\";\nimport \"yet-another-react-lightbox/styles.css\";\nimport \"yet-another-react-lightbox/plugins/captions.css\";\n\nimport { Painting } from './types';\nimport { usePaintings } from './usePaintings';\nimport { zoomies } from 'ldrs';\n\nfunction getPaintingTitle(p: Painting) {\n  let title = `#${p.id}`;\n  if (p.name) {\n    title += ` - ${p.name}`;\n  }\n  if (p.year) {\n    title += ` (${p.year})`;\n  }\n  return title;\n}\n\nfunction getPaintingDescription(p: Painting) {\n  const parts = [];\n  if (p.size) {\n    parts.push(p.size);\n  }\n  if (p.medium) {\n    parts.push(p.medium);\n  }\n  if (p.isFramed) {\n    parts.push('Framed');\n  }\n  if (p.isFramed === false) { // undefined means we don't know if it's framed or not\n    parts.push('Unframed');\n  }\n  if (p.conditionNotes) {\n    parts.push(p.conditionNotes);\n  }\n  if (p.status) {\n    parts.push(p.status);\n  }\n  // TODO: for some reason, this shows an ellipses at the end of only the third line.\n  // Possibly may need to do this properly as a component and not just text, by adding a plugin?\n  // See https://yet-another-react-lightbox.com/advanced#Modules\n  // For now, I'm right-aligning the text, which makes the ellipses disappear.\n  return `${parts.map((p) => p.replaceAll('\\n', '')).join('\\n')}`;\n}\n\ninterface PhotoGalleryProps {\n  paintings: Painting[];\n}\n\nfunction PhotoGalleryImpl(props: PhotoGalleryProps) {\n  const { paintings } = props;\n\n  const navigate = useNavigate();\n\n  const params = new URLSearchParams(document.location.search);\n  // Track the painting id and not index in the header, so that the URL can be shared\n  // even when the order of the paintings changes.\n  const selectedPhotoId = params.get('selected');\n  const selectedPhotoIdx = selectedPhotoId ? paintings.findIndex((p) => p.id === parseInt(selectedPhotoId)) : undefined;\n\n  const photos = paintings.map((p) => {\n    const title = getPaintingTitle(p);\n    return {\n      src: p.photo.url,\n      width: p.photo.width,\n      height: p.photo.height,\n      source: p.photo.url,\n      caption: title,\n      original: p.photo.url,\n      thumbnail: p.photo.url,\n      id: p.id,\n      title,\n      description: getPaintingDescription(p),\n    };\n  });\n\n  return (\n    <div>\n      <Gallery\n        photos={photos}\n        onClick={(e, { index }) => {\n          const nextSelectedId = photos[index]?.id;\n          if (nextSelectedId) {\n            navigate({\n              pathname: document.location.pathname,\n              search: createSearchParams({\n                selected: nextSelectedId.toString(),\n              }).toString()\n            });\n          }\n        }}\n      />\n      <Lightbox\n        styles={{\n          captionsTitleContainer: { backgroundColor: 'transparent' },\n          captionsTitle: { paddingLeft: '60px', paddingTop: '40px' },\n          captionsDescriptionContainer: { backgroundColor: 'transparent' },\n          captionsDescription: {\n            paddingLeft: '40px',\n            height: '200px',\n            width: '300px',\n            textAlign: 'right',\n          }\n        }}\n        open={selectedPhotoIdx !== undefined}\n        close={() => navigate({ pathname: document.location.pathname })}\n        index={selectedPhotoIdx}\n        slides={photos}\n        plugins={[Captions]}\n        on={{\n          view: ({ index }) => {\n            const nextSelectedId = photos[index]?.id;\n            if (nextSelectedId) {\n              navigate({\n                pathname: document.location.pathname,\n                search: createSearchParams({\n                  selected: nextSelectedId.toString(),\n                }).toString()\n              });\n            }\n          }\n        }}\n      />\n    </div>\n  )\n}\n\nexport default function PhotoGallery() {\n  const paintings = usePaintings();\n\n  zoomies.register()\n  return (\n    <div>\n    {\n      paintings === 'loading' ? (\n        <div className=\"loading\">\n          <l-zoomies/>\n        </div>\n      ) : paintings === 'error' ? (\n        <div className=\"loading\">Error loading paintings</div>\n      ) : <PhotoGalleryImpl paintings={paintings} />\n    }\n    </div>\n  )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}