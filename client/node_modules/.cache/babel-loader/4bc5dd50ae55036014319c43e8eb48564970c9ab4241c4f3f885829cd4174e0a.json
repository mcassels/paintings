{"ast":null,"code":"import React from'react';import{createSearchParams,useNavigate}from'react-router-dom';import Gallery from'react-photo-gallery';import Lightbox from\"yet-another-react-lightbox\";import Captions from\"yet-another-react-lightbox/plugins/captions\";import\"yet-another-react-lightbox/styles.css\";import\"yet-another-react-lightbox/plugins/captions.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function getPaintingTitle(p){let title=\"#\".concat(p.id);if(p.name){title+=\" - \".concat(p.name);}if(p.year){title+=\" (\".concat(p.year,\")\");}return title;}function getPaintingDescription(p){const parts=[];if(p.size){parts.push(p.size);}if(p.medium){parts.push(p.medium);}if(p.isFramed){parts.push('Framed');}if(p.isFramed===false){// undefined means we don't know if it's framed or not\nparts.push('Unframed');}if(p.conditionNotes){parts.push(p.conditionNotes);}if(p.status){parts.push(p.status);}// TODO: for some reason, this shows an ellipses at the end of only the third line.\n// Possibly may need to do this properly as a component and not just text, by adding a plugin?\n// See https://yet-another-react-lightbox.com/advanced#Modules\n// For now, I'm right-aligning the text, which makes the ellipses disappear.\nreturn\"\".concat(parts.map(p=>p.replaceAll('\\n','')).join('\\n'));}export default function PhotoGallery(props){const{paintings}=props;const navigate=useNavigate();const params=new URLSearchParams(document.location.search);// Track the painting id and not index in the header, so that the URL can be shared\n// even when the order of the paintings changes.\nconst selectedPhotoId=params.get('selected');const selectedPhotoIdx=selectedPhotoId?paintings.findIndex(p=>p.id===parseInt(selectedPhotoId)):undefined;const photos=paintings.map(p=>{const title=getPaintingTitle(p);return{src:p.photo.url,width:p.photo.width,height:p.photo.height,source:p.photo.url,caption:title,original:p.photo.url,thumbnail:p.photo.url,id:p.id,title,description:getPaintingDescription(p)};});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Gallery,{photos:photos,onClick:(e,_ref)=>{var _photos$index;let{index}=_ref;const nextSelectedId=(_photos$index=photos[index])===null||_photos$index===void 0?void 0:_photos$index.id;if(nextSelectedId){navigate({pathname:document.location.pathname,search:createSearchParams({selected:nextSelectedId.toString()}).toString()});}}}),/*#__PURE__*/_jsx(Lightbox,{styles:{captionsTitleContainer:{backgroundColor:'transparent'},captionsTitle:{paddingLeft:'60px',paddingTop:'40px'},captionsDescriptionContainer:{backgroundColor:'transparent'},captionsDescription:{paddingLeft:'40px',height:'200px',width:'300px',textAlign:'right'}},open:selectedPhotoIdx!==undefined,close:()=>navigate({pathname:document.location.pathname}),index:selectedPhotoIdx,slides:photos,plugins:[Captions],on:{view:_ref2=>{var _photos$index2;let{index}=_ref2;const nextSelectedId=(_photos$index2=photos[index])===null||_photos$index2===void 0?void 0:_photos$index2.id;if(nextSelectedId){navigate({pathname:document.location.pathname,search:createSearchParams({selected:nextSelectedId.toString()}).toString()});}}}})]});}","map":{"version":3,"names":["React","createSearchParams","useNavigate","Gallery","Lightbox","Captions","jsx","_jsx","jsxs","_jsxs","getPaintingTitle","p","title","concat","id","name","year","getPaintingDescription","parts","size","push","medium","isFramed","conditionNotes","status","map","replaceAll","join","PhotoGallery","props","paintings","navigate","params","URLSearchParams","document","location","search","selectedPhotoId","get","selectedPhotoIdx","findIndex","parseInt","undefined","photos","src","photo","url","width","height","source","caption","original","thumbnail","description","children","onClick","e","_ref","_photos$index","index","nextSelectedId","pathname","selected","toString","styles","captionsTitleContainer","backgroundColor","captionsTitle","paddingLeft","paddingTop","captionsDescriptionContainer","captionsDescription","textAlign","open","close","slides","plugins","on","view","_ref2","_photos$index2"],"sources":["/Users/morgan/dev/paintings/src/PhotoGallery.tsx"],"sourcesContent":["import React from 'react';\nimport { createSearchParams, useNavigate } from 'react-router-dom';\nimport Gallery from 'react-photo-gallery'\nimport Lightbox from \"yet-another-react-lightbox\";\nimport Captions from \"yet-another-react-lightbox/plugins/captions\";\nimport \"yet-another-react-lightbox/styles.css\";\nimport \"yet-another-react-lightbox/plugins/captions.css\";\n\nimport { Painting } from './types';\n\nfunction getPaintingTitle(p: Painting) {\n  let title = `#${p.id}`;\n  if (p.name) {\n    title += ` - ${p.name}`;\n  }\n  if (p.year) {\n    title += ` (${p.year})`;\n  }\n  return title;\n}\n\nfunction getPaintingDescription(p: Painting) {\n  const parts = [];\n  if (p.size) {\n    parts.push(p.size);\n  }\n  if (p.medium) {\n    parts.push(p.medium);\n  }\n  if (p.isFramed) {\n    parts.push('Framed');\n  }\n  if (p.isFramed === false) { // undefined means we don't know if it's framed or not\n    parts.push('Unframed');\n  }\n  if (p.conditionNotes) {\n    parts.push(p.conditionNotes);\n  }\n  if (p.status) {\n    parts.push(p.status);\n  }\n  // TODO: for some reason, this shows an ellipses at the end of only the third line.\n  // Possibly may need to do this properly as a component and not just text, by adding a plugin?\n  // See https://yet-another-react-lightbox.com/advanced#Modules\n  // For now, I'm right-aligning the text, which makes the ellipses disappear.\n  return `${parts.map((p) => p.replaceAll('\\n', '')).join('\\n')}`;\n}\n\ninterface PhotoGalleryProps {\n  paintings: Painting[];\n}\n\nexport default function PhotoGallery(props: PhotoGalleryProps) {\n  const { paintings } = props;\n\n  const navigate = useNavigate();\n\n  const params = new URLSearchParams(document.location.search);\n  // Track the painting id and not index in the header, so that the URL can be shared\n  // even when the order of the paintings changes.\n  const selectedPhotoId = params.get('selected');\n  const selectedPhotoIdx = selectedPhotoId ? paintings.findIndex((p) => p.id === parseInt(selectedPhotoId)) : undefined;\n\n  const photos = paintings.map((p) => {\n    const title = getPaintingTitle(p);\n    return {\n      src: p.photo.url,\n      width: p.photo.width,\n      height: p.photo.height,\n      source: p.photo.url,\n      caption: title,\n      original: p.photo.url,\n      thumbnail: p.photo.url,\n      id: p.id,\n      title,\n      description: getPaintingDescription(p),\n    };\n  });\n\n  return (\n    <div>\n      <Gallery\n        photos={photos}\n        onClick={(e, { index }) => {\n          const nextSelectedId = photos[index]?.id;\n          if (nextSelectedId) {\n            navigate({\n              pathname: document.location.pathname,\n              search: createSearchParams({\n                selected: nextSelectedId.toString(),\n              }).toString()\n            });\n          }\n        }}\n      />\n      <Lightbox\n        styles={{\n          captionsTitleContainer: { backgroundColor: 'transparent' },\n          captionsTitle: { paddingLeft: '60px', paddingTop: '40px' },\n          captionsDescriptionContainer: { backgroundColor: 'transparent' },\n          captionsDescription: {\n            paddingLeft: '40px',\n            height: '200px',\n            width: '300px',\n            textAlign: 'right',\n          }\n        }}\n        open={selectedPhotoIdx !== undefined}\n        close={() => navigate({ pathname: document.location.pathname })}\n        index={selectedPhotoIdx}\n        slides={photos}\n        plugins={[Captions]}\n        on={{\n          view: ({ index }) => {\n            const nextSelectedId = photos[index]?.id;\n            if (nextSelectedId) {\n              navigate({\n                pathname: document.location.pathname,\n                search: createSearchParams({\n                  selected: nextSelectedId.toString(),\n                }).toString()\n              });\n            }\n          }\n        }}\n      />\n    </div>\n  )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}